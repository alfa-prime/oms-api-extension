# Технологический стек

## Бэкенд
- **Фреймворк**: FastAPI с паттернами async/await
- **Версия Python**: Современный Python (3.8+)
- **HTTP клиент**: httpx для внешних API вызовов
- **Конфигурация**: pydantic-settings для настроек на основе переменных окружения
- **Логирование**: loguru для структурированного логирования
- **Кэширование**: Redis для управления сессиями
- **Сервер**: uvicorn (разработка) / gunicorn (продакшн)

## Фронтенд (Браузерное расширение)
- **Манифест**: Chrome Extension Manifest V3
- **JavaScript**: ES6+ модули с async/await
- **Архитектура**: Service worker фоновый скрипт + content скрипты
- **Разрешения**: activeTab, scripting, tabs, windows

## Инфраструктура
- **Контейнеризация**: Docker с многоэтапными сборками
- **Оркестрация**: Docker Compose для локальной разработки
- **База данных**: Redis для кэширования и хранения сессий
- **Окружение**: .env файлы для управления конфигурацией

## Основные библиотеки
- `fastapi` - Веб-фреймворк
- `httpx` - HTTP клиент с логикой повторов (tenacity)
- `pydantic-settings` - Управление конфигурацией
- `redis` + `hiredis` - Слой кэширования
- `loguru` - Логирование

## Основные команды

### Разработка
```bash
# Запуск среды разработки
make up

# Остановка сервисов
make down

# Доступ к shell контейнера приложения
make bash

# Просмотр логов
docker compose logs -f app
```

### Продакшн
```bash
# Развертывание продакшн
make up-prod

# Остановка продакшн
make down-prod

# Просмотр логов продакшн
make logs-prod

# Доступ к продакшн shell
make bash-prod
```

### Обслуживание
```bash
# Очистка Docker ресурсов
make clean
```

## Процесс сборки
- Docker сборки используют многоэтапный подход
- Разработка: Горячая перезагрузка с монтированием томов
- Продакшн: Оптимизированные образы без dev зависимостей
- Переменные окружения загружаются из `.env` (dev) или `.prod.env` (prod)